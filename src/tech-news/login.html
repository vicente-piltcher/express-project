<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">

  <link rel="icon" href="http://localhost:3030/logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

  <link rel="stylesheet" href="styles.css">
  <title>Login</title>

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


</head>

<body>
  <header>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
          <span class="navbar-brand">
            <img src="./images/logo.png" alt="Logo Tech News" width="128">
            <span>Olá Pedro</span>
          </span>
          <form class="d-flex" role="search">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
          </form>
          <form class="d-flex" role="loginpage">
            <a href="login.html"><button class="btn btn-dark" type="submit">Login</button></a>
          </form>
        </div>
      </nav>
  </header>

  <div class="container" id="App">
        <div class="d-flex justify-content-center">
            <div class="border border-primary login">
                <h2 style="text-align:center;">Login</h2>
                <div class="loginform d-flex justify-content-center">
                    <form style="align-items: center;">
                        <div style="align-content:center; margin-bottom: 10px; margin-top: 30px">
                            <label for="user">Usuário:</label>
                            <input id="user" type="text">
                        </div>

                        <div style="align-content:center; margin-top: 30px;">
                            <label for="pass">Senha:</label>
                            <input id="pass" type="password">
                        </div>

                        <div style="align-items: center; margin-top: 30px; padding-left: 100px">
                            <button type="button" class="btn btn-outline-success" onclick="Logar()">Login</button>
                        </div>

                        <div class="d-flex justify-content-center" style="padding-left: 10px; padding-top:5px;">
                            <h6>Não possui Login? <a href="http://localhost:3030/register">Registre-se</a></h6>
                        </div>
                    </form>
                </div>
            </div>
        </div>
  </div>

  <script>
    function Logar(){
    //READ USER DATA
    user = document.querySelector('#user').value;
    pass = document.querySelector('#pass').value;

    //VERIFY DATA
    if (!user || !pass) {
        return alert('Por favor, preencha todos os campos corretamente.')
    }

    //SEND DATA TO SERVER
    axios.post('Controllers/Users/Logar', {
        user, pass
      }).then(response => {
        if(response.data.erro) {
            return alert(response.data.erro);
        } else {
            //EVERYTHING RIGHT
            window.location.href = "/logged";
        }
      }).catch(erro => {
          return alert(response.data.erro);
      });
    }
  </script>

  


  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
  integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
  crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
  integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
  crossorigin="anonymous"></script>

  
</body>
<footer>

  <div class="footer-container">
    <img src="./images/puc.png" alt="brasão da faculdade">
    <p>Análise e Desenvolvimento de Sistemas </p>
  </div>
</footer>


</html>